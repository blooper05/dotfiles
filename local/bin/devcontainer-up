#!/bin/bash

[ "$KUBIE_ACTIVE" = 1 ] && exit 1

colima-start-devcontainer &&
	devcontainer up \
		--mount="type=bind,source=$AWS_CONFIG_FILE,target=/root/.aws/config" \
		--mount="type=bind,source=$AWS_SHARED_CREDENTIALS_FILE,target=/root/.aws/credentials" \
		--mount="type=bind,source=$KUBECACHEDIR,target=/root/.kube/cache" \
		--mount="type=bind,source=$KUBECONFIG,target=/root/.kube/config" \
		--mount="type=bind,source=$XDG_CONFIG_HOME/netrc/config,target=/root/.netrc" \
		--workspace-folder=.
